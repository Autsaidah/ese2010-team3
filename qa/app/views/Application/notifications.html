#{extends 'main.html' /}

#{set title:'ajopi - Notifications for ' + user.getName() /}
<div>
	<h2>Notification Inbox</h2>
	<ul>
	#{list items:notifications, as:'notification'}
		<li>
		<div>
			#{if notification.isNew()}*new*#{/if}
			#{showProfile notification.getAbout() /} answered to
			${notification.getAbout().getQuestion().summary()}:
		</div>
		<div>
			<a href="@{Secured.followNotification(notification.getID())}">${notification.getAbout().content()}</a>
			#{date notification.getAbout() /}
			<span style="float: right;"><a href="@{Secured.deleteNotification(notification.getID())}">delete</a></span>
		</div>
	#{/list}
	#{else}
		<li>No notifications available at all - go watch some questions!
	#{/else}
	#{if user.getNewNotifications().size() > 0}
		<li><a href="@{Secured.clearNewNotifications}">Mark all notifications as read</a>
	#{/if}
	</ul>
	<h2>Watchinglist</h2>
<ul>
	#{list items:watchingQuestions, as:'question'}
		<li onclick="goto('@@{Application.question(question.id())}')">
			<a href="@{Application.question(question.id())}">
				<h2>#{showProfile question /}:</h2>
			</a>
			<p>${question.content()}</p>
		</li>
	#{/list}
</ul>
	
</div>
